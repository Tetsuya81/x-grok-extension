# X to Grok Chrome拡張機能

x.comのポストにGrokアイコンを追加し、ワンクリックでポストリンクをコピーしてGrokページに移動できるChrome拡張機能です。

## 機能

- **アイコン追加**: x.comの各ポストのタイムスタンプ隣にGrokアイコン（G）を表示
- **リンクコピー**: アイコンをクリックするとポストのURLがクリップボードにコピーされます
- **Grok移動**: コピー後、自動的にGrokページ（https://x.com/i/grok）に移動します
- **視覚的フィードバック**: 成功時は緑のチェックマーク、失敗時は赤のXマークを表示
- **プロンプト機能**: 設定画面でカスタムプロンプトを登録し、URLと一緒にコピーできます（v1.1新機能）
- **ダークモード対応**: システムのカラーモード設定に自動的に適応（v1.5新機能）
- **キーボードショートカット**: モーダル操作を効率化（v1.5新機能）
  - ESCキーでモーダルを閉じる
  - Command + Shift + Enter（Mac）/ Ctrl + Shift + Enter（Windows/Linux）で実行

## インストール方法

### 1. 拡張機能ファイルの準備
このフォルダ全体をローカルに保存してください。

### 2. Chrome拡張機能の開発者モードを有効化
1. Chromeブラウザを開く
2. アドレスバーに `chrome://extensions/` と入力してEnterキーを押す
3. 右上の「開発者モード」をオンにする

### 3. 拡張機能をロード
1. 「パッケージ化されていない拡張機能を読み込む」をクリック
2. この拡張機能フォルダ（x-grok-extension）を選択
3. 「フォルダーの選択」をクリック

### 4. 拡張機能の確認
- 拡張機能一覧に「X to Grok」が表示されることを確認
- 拡張機能が有効になっていることを確認

## 使用方法

### 基本的な使い方（v1.3新機能）
1. **x.comにアクセス**: https://x.com にアクセス
2. **アイコンを確認**: 各ポストのタイムスタンプの隣に「G」アイコンが表示されます
3. **アイコンをクリック**:
   - プロンプト選択モーダルが表示されます
   - プロンプトを選択すると、URLとプロンプトがクリップボードにコピーされます
   - 自動的にGrokページに移動します

### プロンプト選択モーダル
- **プリセットプロンプト**: 要約、翻訳、分析、詳細説明から選択
- **最近使用したプロンプト**: 直近5件の使用履歴から選択
- **カスタムプロンプト**: 「カスタムプロンプトを設定...」から独自のプロンプトを作成
- **キーボード操作**:
  - ESCキー: モーダルを閉じる
  - Command + Shift + Enter（Mac）/ Ctrl + Shift + Enter（Windows/Linux）: プロンプトを実行してGrokに移動

### カスタムプロンプトの設定
1. **モーダルから設定**: プロンプト選択モーダルの「カスタムプロンプトを設定...」をクリック
2. **拡張機能アイコンから設定**: ブラウザツールバーの拡張機能アイコンをクリック
3. **プロンプトを入力**: テキストエリアに独自のプロンプトを入力
4. **保存**: 「カスタムプロンプトを使用」ボタンをクリック

## 対応サイト

- https://x.com/*
- https://twitter.com/*

## ファイル構成

```
x-grok-extension/
├── manifest.json          # 拡張機能の設定ファイル
├── content.js             # メイン機能のスクリプト
├── styles.css             # アイコンのスタイル
├── popup.html             # ポップアップページ
├── icons/                 # アイコンファイル
│   ├── icon16.png
│   ├── icon32.png
│   ├── icon48.png
│   └── icon128.png
└── README.md              # このファイル
```

## 技術仕様

- **Manifest Version**: 3
- **権限**: clipboardWrite, activeTab, storage
- **対象要素**: `[data-testid="tweet"]`
- **アイコン配置**: time要素の隣にインラインフロー配置（フォールバック: 絶対配置）
- **スタイル管理**: CSS中心、ダークモード対応
- **キーボードショートカット**: プラットフォーム自動検出（Mac/Windows/Linux）
- **データ保存**: Chrome Storage Sync API（デバイス間同期対応）

## トラブルシューティング

### アイコンが表示されない場合
1. 拡張機能が有効になっているか確認
2. ページを再読み込み（F5キー）
3. x.comにログインしているか確認

### クリップボードコピーが失敗する場合
1. ブラウザがクリップボードアクセスを許可しているか確認
2. HTTPSページでアクセスしているか確認

### Grokページに移動しない場合
1. ポップアップブロッカーが無効になっているか確認
2. 新しいタブの開設が許可されているか確認

## 更新履歴

- **v1.5.0** (2025-12-29): アイコン配置とスタイリングの改善、キーボードショートカット追加
  - アイコン配置を絶対配置からインラインフロー配置に変更
  - time要素の隣にアイコンを配置（より自然な表示）
  - スタイル管理をJavaScriptからCSSに移行
  - ダークモード対応を追加
  - アイコンサイズを18.75pxに最適化
  - ネイティブUIに馴染むデザインに改善
  - キーボードショートカット機能の追加
    - ESCキーでモーダルを閉じる
    - Command + Shift + Enter（Mac）/ Ctrl + Shift + Enter（Windows/Linux）で実行

- **v1.4.2** (2025-07-06): 設定画面機能の追加
  - "Template prompt"ラベルを削除してUIをクリーンアップ
  - プラグインの設定画面ページを追加（options.html）
  - プリセットプロンプトの追加、編集、削除機能
  - メニューバーのプラグインアイコンで設定画面に直接移動
  - ポップアップ機能を廃止（popup.html/popup.js削除）
  - カスタムプリセットの管理とChrome Storage同期

- **v1.4.1** (2025-07-06): UI細部調整
  - Template Promptのcombobox形式改良
  - Historyアイコンサイズを1.6倍に拡大
  - 「Go to Grok」ボタンをX.com基調カラー（黒）に変更
  - Grokアイコンを左にずらして"もっと見る"ボタンとの重複回避

- **v1.4** (2025-07-06): UI仕様に基づく全面リニューアル
  - 縦長サイドパネル形式のモーダルデザインに変更
  - Settings アイコン（⚙️）を右上に追加
  - Link Preview機能でポスト内容とURLを表示
  - Template Promptドロップダウンメニュー
  - History アイコン（⟲）で履歴の呼び出し
  - 大きなPrompt Form入力エリア
  - 「Go to Grok」実行ボタン

- **v1.3** (2025-07-06): モーダルダイアログ実装
  - Grokアイコンクリック時にプロンプト選択モーダルを表示
  - x.comページ内でプロンプトを選択可能に
  - よりスムーズなユーザー体験を実現
  - バックグラウンドスクリプトを追加

- **v1.2** (2025-07-06): UI/UX改善
  - プロンプト選択画面を大幅に改善（カード形式のデザイン）
  - 現在選択中のプロンプトを明確に表示
  - 最近使用したプロンプトの履歴機能（最大5件）
  - 視覚的フィードバックの強化

- **v1.1** (2025-07-05): プロンプト機能追加
  - カスタムプロンプトの保存・管理機能
  - プリセットプロンプト（要約、翻訳、分析、詳細説明）
  - URLと一緒にプロンプトをコピーする機能
  - Chrome Storage Sync APIによるデバイス間同期

- **v1.0** (2025-07-05): 初回リリース
  - ポストアイコン追加機能
  - リンクコピー機能
  - Grokページ移動機能

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## サポート

問題や質問がある場合は、拡張機能の設定ページからフィードバックをお送りください。

